<div class="p-5">
  <p-table
    [value]="rows"
    rowGroupMode="subheader"
    dataKey="id"
    sortMode="single"
    [tableStyle]="{ 'min-width': '60rem' }"
    [(selection)]="selectedMenuPlans"
  >
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 4px"><p-tableHeaderCheckbox /></th>
        <th>Menüs</th>
        <th>Nächste Ausführung</th>
        <th>Wochentag</th>
        <th>Ort</th>
        <th>Portionen</th>
        <th>Wiederholung</th>
        <th>Einkaufen?</th>
        <th>Komponenten</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-menuPlan let-expanded="expanded">
      <tr>
        <td><p-tableCheckbox [value]="menuPlan" /></td>
        <td>{{ menuPlan.menuName }}</td>
        <td>{{ menuPlan.executionWeekNumber }}</td>
        <td>{{ menuPlan.weekDay }}</td>
        <td>{{ menuPlan.place }}</td>
        <td>{{ menuPlan.portions }}</td>
        <td>WIP</td>
        <td>
          <img src="../../../assets/icons/shop.png" alt="" />
        </td>
        <td>
          <p-button [pRowToggler]="menuPlan" icon="pi pi-list"></p-button>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="rowexpansion" let-menuPlan>
      <tr>
        <td colspan="7">
          <p-table
            [value]="getIngredients(menuPlan)"
            [tableStyle]="{ 'min-width': '100%' }"
          >
            <ng-template pTemplate="header">
              <tr class="bg-red-100">
                <th class="text-center w-10 ingredient-table-head">
                  Erzeugnis
                </th>
                <th class="text-center w-10 ingredient-table-head">Menge</th>
                <th class="text-center w-10 ingredient-table-head">
                  Verarbeitung
                </th>
                <th class="text-center w-10 ingredient-table-head">
                  Einkaufen?
                </th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-ingredient>
              <tr>
                <td class="text-center">{{ ingredient.name }}</td>
                <td class="text-center">
                  <span class="pl-5 pr-5 pt-1 pb-1 bg-green-100 border-round"
                    >{{ ingredient.amount }} {{ ingredient.unit }}</span
                  >
                </td>
                <td class="text-center"></td>
                <td class="text-center">
                  <img src="../../../assets/icons/shop.png" alt="" />
                </td>
              </tr>
            </ng-template>
          </p-table>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <div class="mt-5">
    <p-button (click)="show()">Einkaufszettel erstellen</p-button>
  </div>
</div>
