<div class="container py-5">
  <div *ngIf="!(loaded)">Loading data...</div>
  <div *ngIf="loaded">
    <div class="calendar-wrapper">
      <!-- Title Section -->
      <h2 class="text-center calendar-title mb-5">Saisonkalender für Obst und Gemüse</h2>
      
      <!-- Month Dropdown Selector -->
      <div class="d-flex justify-content-center mb-4">
        <p-dropdown [options]="seasons" [(ngModel)]="selectedSeason" (onChange)="updateOutputList()"
        placeholder="Wählen Sie eine Saison aus" class="custom-dropdown w-50"></p-dropdown>
      </div>

      <!-- Produce Grid (Modern Card Layout) -->
      <div class="row g-4">
        <ng-container *ngFor="let produce of outputData">
          <div class="col-sm-6 col-md-4 col-lg-3">
            <div [ngClass]="{}" (click)="showDetails(produce)"
            class="produce-card card shadow-sm h-100">
              <div class="card-body d-flex flex-column align-items-center text-center">
                  <h5>{{ produce.productName }}</h5>
                  <img *ngIf="produce.imageUrl" [src]="produce.imageUrl" [alt]="produce.productName"
                  class="img-fluid rounded mb-3 produce-image" style="max-height: 150px;" />
                <span *ngIf="!produce.imageUrl" class="text-muted">Kein Bild verfügbar</span>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
    
      <!-- No Produce Found -->
      <div *ngIf="outputData.length === 0" class="text-center mt-4">
        <p class="text-muted">Keine Produkte für den ausgewählten Monat verfügbar.</p>
      </div>
    </div>
  </div>

  <p-dialog [(visible)]="displayDialog" [style]="{width: '50vw'}" [modal]="true" [draggable]="false" [resizable]="false">
    <ng-template pTemplate="header">
      Product Details
    </ng-template>
    <ng-container  *ngIf="selectedProduct">
      <p><strong>Company Name:</strong> {{ selectedProduct.company.label }}</p>
      <!-- <p><strong>Label:</strong> {{ selectedProduct.company.label }}</p> -->
      <p><strong>City:</strong> {{ selectedProduct.company.city }}</p>
      <!-- <p><strong>Product:</strong> {{ selectedProduct.ontoFoodType?.label }}</p> -->
      <p><strong>Amount:</strong> {{ selectedProduct.product.amount }} {{ selectedProduct.product.unit }}</p>
      <p><strong>From:</strong> {{ selectedProduct.product.dateStart }}</p>
      <p><strong>To:</strong> {{ selectedProduct.product.dateEnd }}</p>
      <p><strong>Link:</strong> <a [href]="selectedProduct.links.company" target="_blank"> {{ selectedProduct.links.company }}</a></p>
    </ng-container>
  </p-dialog>

</div>